<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Bootloader Host Script | Microchip MPLAB Harmony UART Bootloader Applications help</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Bootloader Host Script" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 UART Bootloader Applications package" /> <meta property="og:description" content="Harmony 3 UART Bootloader Applications package" /> <link rel="canonical" href="../../tools/docs/readme_btl_host.html" /> <meta property="og:url" content="../../tools/docs/readme_btl_host.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony UART Bootloader Applications help" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"@type":"WebPage","url":"../../tools/docs/readme_btl_host.html","headline":"Bootloader Host Script","description":"Harmony 3 UART Bootloader Applications package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../index.html" class="nav-list-link">UART Bootloader Applications</a><ul class="nav-list "><li class="nav-list-item "><a href="../../apps/uart_bootloader/readme.html" class="nav-list-link">UART Bootloader</a></li><li class="nav-list-item "><a href="../../apps/uart_fail_safe_bootloader/readme.html" class="nav-list-link">UART Fail Safe Bootloader</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../tools/readme.html" class="nav-list-link">UART Bootloader Host Tools</a><ul class="nav-list "><li class="nav-list-item active"><a href="../../tools/docs/readme_btl_host.html" class="nav-list-link active">Bootloader Host Script</a></li><li class="nav-list-item "><a href="../../tools/docs/readme_btl_app_merge_bin.html" class="nav-list-link">Bootloader and Application binary merge script</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../apps/docs/readme_configure_application.html" class="nav-list-link">Application Configurations</a><ul class="nav-list "><li class="nav-list-item "><a href="../../apps/docs/readme_configure_application_sam.html" class="nav-list-link">Application Configurations for CORTEX-M based MCUs</a></li><li class="nav-list-item "><a href="../../apps/docs/readme_configure_application_pic32m.html" class="nav-list-link">Application Configurations for MIPS based MCUs</a></li></ul></li><li class="nav-list-item"><a href="../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony UART Bootloader Applications help" aria-label="Search Microchip MPLAB Harmony UART Bootloader Applications help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../tools/readme.html">UART Bootloader Host Tools</a></li> <li class="breadcrumb-nav-list-item"><span>Bootloader Host Script</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="bootloader-host-script-help"> <a href="#bootloader-host-script-help" aria-labelledby="bootloader-host-script-help" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bootloader Host Script Help </h1> <p>This document describes the usage of <strong>btl_host.py</strong> host script</p> <h2 id="downloading-the-host-script"> <a href="#downloading-the-host-script" aria-labelledby="downloading-the-host-script" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Downloading the host script </h2> <p>To clone or download the host tools from Github,go to the <a href="https://github.com/Microchip-MPLAB-Harmony/bootloader">bootloader repository</a> and then click Clone button to clone this repo or download as zip file. This content can also be download using content manager by following <a href="https://github.com/Microchip-MPLAB-Harmony/contentmanager/wiki">these instructions</a></p> <h3 id="path-of-the-tool-in-bootloader-repository-is-toolsbtl_hostpy"> <a href="#path-of-the-tool-in-bootloader-repository-is-toolsbtl_hostpy" aria-labelledby="path-of-the-tool-in-bootloader-repository-is-toolsbtl_hostpy" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Path of the tool in bootloader repository is <strong>tools/btl_host.py</strong> </h3> <h2 id="setting-up-the-host-pc"> <a href="#setting-up-the-host-pc" aria-labelledby="setting-up-the-host-pc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up the Host PC </h2> <ul> <li> <p>The Script is compatible with <strong>Python 3.x</strong> and higher</p> </li> <li> <p>It requires pyserial package to communicate with device over UART. Use below command to install the pyserial package</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install pyserial
</code></pre></div> </div> </li> </ul> <h2 id="description"> <a href="#description" aria-labelledby="description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <ul> <li> <p>This host script should be used to communicate with the Bootloader running on the device via <strong>UART interface</strong></p> </li> <li> <p>It is a command line interface and implements the bootloader protocol required to communicate from host PC</p> </li> <li> <p>If size of the input binary file is not aligned to device erase boundary it appends 0xFF to the binary to make it aligned and then sends the binary to the device</p> </li> <li> <p>It should be used with -s (–swap) option when using bootloader in <strong>fail safe update mode</strong> to trigger a <strong>swap bank and reset</strong></p> </li> <li> <p>It should be used with -b (–boot) option with address as 0x0 when updating the bootloader itself on <strong>CORTEX-M based MCUs</strong></p> </li> </ul> <h2 id="usage-examples"> <a href="#usage-examples" aria-labelledby="usage-examples" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage Examples </h2> <h3 id="below-is-the-syntax-to-show-help-menu-for-the-script"> <a href="#below-is-the-syntax-to-show-help-menu-for-the-script" aria-labelledby="below-is-the-syntax-to-show-help-menu-for-the-script" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Below is the syntax to show help menu for the script </h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python &lt;harmony3_path&gt;/bootloader/tools/btl_host.py --help
</code></pre></div></div> <p align="center"> <img src="./images/btl_host_help_menu.png" /> </p> <h3 id="bootloader-basic-mode-syntax-and-example"> <a href="#bootloader-basic-mode-syntax-and-example" aria-labelledby="bootloader-basic-mode-syntax-and-example" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bootloader basic mode syntax and example </h3> <p>Below syntax and example can be used to program a binary and send a <strong>Reset command</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python &lt;harmony3_path&gt;/bootloader/tools/btl_host.py -v -i &lt;COM PORT&gt; -d &lt;Device Name&gt; -a &lt;address&gt; -f &lt;Application_binary_path&gt;
</code></pre></div></div> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="o">&lt;</span><span class="n">harmony3_path</span><span class="o">&gt;/</span><span class="n">bootloader</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">btl_host</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">i</span> <span class="n">COM18</span> <span class="o">-</span><span class="n">d</span> <span class="n">same5x</span> <span class="o">-</span><span class="n">a</span> <span class="mh">0x2000</span> <span class="o">-</span><span class="n">f</span> <span class="o">&lt;</span><span class="n">harmony3_path</span><span class="o">&gt;/</span><span class="n">bootloader_apps_uart</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">uart_bootloader</span><span class="o">/</span><span class="n">test_app</span><span class="o">/</span><span class="n">firmware</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="p">.</span><span class="n">X</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="p">.</span><span class="n">X</span><span class="p">.</span><span class="n">production</span><span class="p">.</span><span class="n">bin</span>
</code></pre></div></div> <p align="center"> <img src="./images/btl_host_output.png" /> </p> <h3 id="bootloader-fail-safe-update-mode-syntax-and-example"> <a href="#bootloader-fail-safe-update-mode-syntax-and-example" aria-labelledby="bootloader-fail-safe-update-mode-syntax-and-example" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bootloader Fail Safe Update mode syntax and example </h3> <p>Below syntax and example can be used to program a binary in <strong>Inactive Bank</strong> and send a <strong>Swap Bank and Reset command</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python &lt;harmony3_path&gt;/bootloader/tools/btl_host.py -v -s -i &lt;COM PORT&gt; -d &lt;Device Name&gt; -a &lt;Inactive Bank address&gt; -f &lt;Path to application binary&gt;
</code></pre></div></div> <p><strong>Example to send Bootloader binary in inactive bank</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="o">&lt;</span><span class="n">harmony3_path</span><span class="o">&gt;/</span><span class="n">bootloader</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">btl_host</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">i</span> <span class="n">COM18</span> <span class="o">-</span><span class="n">d</span> <span class="n">same5x</span> <span class="o">-</span><span class="n">a</span> <span class="mh">0x80000</span> <span class="o">-</span><span class="n">f</span> <span class="o">&lt;</span><span class="n">harmony3_path</span><span class="o">&gt;/</span><span class="n">bootloader_apps_uart</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">uart_fail_safe_bootloader</span><span class="o">/</span><span class="n">bootloader</span><span class="o">/</span><span class="n">firmware</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="p">.</span><span class="n">X</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="p">.</span><span class="n">X</span><span class="p">.</span><span class="n">production</span><span class="p">.</span><span class="n">bin</span>
</code></pre></div></div> <p><strong>Example to send Application binary in inactive bank</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="o">&lt;</span><span class="n">harmony3_path</span><span class="o">&gt;/</span><span class="n">bootloader</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">btl_host</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">i</span> <span class="n">COM18</span> <span class="o">-</span><span class="n">d</span> <span class="n">same5x</span> <span class="o">-</span><span class="n">a</span> <span class="mh">0x82000</span> <span class="o">-</span><span class="n">f</span> <span class="o">&lt;</span><span class="n">harmony3_path</span><span class="o">&gt;/</span><span class="n">bootloader_apps_uart</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">uart_fail_safe_bootloader</span><span class="o">/</span><span class="n">test_app</span><span class="o">/</span><span class="n">firmware</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="p">.</span><span class="n">X</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">sam_e54_xpro</span><span class="p">.</span><span class="n">X</span><span class="p">.</span><span class="n">production</span><span class="p">.</span><span class="n">bin</span>
</code></pre></div></div> <p align="center"> <img src="./images/btl_host_swap_bank_output.png" /> </p> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
